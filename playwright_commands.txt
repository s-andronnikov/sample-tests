--- AI Instructions ---
Python package versions:
 - python: >=3.12
 - pytest: >=8.4
 - playwright: >=v1.53
Base JS UI frameworks is:
 - react: >=18.3
 - ag-grid-enterprise: >=34
 - ag-grid-react: >=34

Testing framework is pytest + playwright-python

Base Tests structures:
 - Types of tests:
   - API: folder /api
   - UI: folder /ui

Currently need to work with UI tests only.
UI tests stricture:
 - All tests located at /ui/tests folder and can be separated by following modules:
   - folder "tax_depreciation": urls with __host__/depreciation/*
   - folder "dit": urls with {host_url}/dit/*
   - folder "provision": urls with {host_url}/provision/*
   - folder "nova": urls with {host_url}/nova/*
 - Each test files should has tests associated to page. Pages located at ui/pages and should be separated by modules in tests way (see folders naming above).
 - Each isolated element on page like list grid or form can be isolated as separated component. Components located as /ui/pages/components
   and should be located using module/page folders structure (see module folders naming above).

Helpers located: /ui/helpers
 - url_helper.py: helper to build url using defined routes from UIRoutes (common/routes.py) and dynamic variables like "depr_case_id"
 - ag_grid_helper.py: common helper with locators and actions for Ag-Grid grids.

Fixtures located at: ui/fixtures.py. In general using it to define pages as fixtures. Each page usually has two fixture - first: page itself,
second one authenticated fixture with login action injections.

All tests should use AI instructions, project context for UI tests and existed tests as an example.

---------------------------------

Can you add test for Configurations Company page. URL is {host_url}/depreciation/{depr_case_id}/configurations/company.
All tests should use AI instructions, project context for UI tests and existed tests as an example.

Main content locator is Element(By.LOCATOR, ".page-container .configurations")

You should cover following actions:

1. Test Main Company page
  - Should be loaded successfully:
     - Should have title "Company"
     - Active "Create" button
     - Ag-grid grid with following headers: Name, Regulated, Closing Frequency, Tags, Actions

2. Test Create Company
  - Main Company page should have active "Create" button
  - Clicking on it should open form component with following elements:
     - Title is "Create Company"
     - Input field with "Name" title
     - Dropdown element with "Closing Frequency" title
     - Regulated checkbox (should be off by default)
     - Tags dropdown
     - Actions buttons
       - "Cancel" - should be enabled
       - "Create" - should be disabled
  - Fill form. Keep all form data to verify saved item.
     - Name: fake title with "!" on beginning to have new item first in list sorting by name
     - Closing Frequency: first item from possible options. You need to click on this element first to see dropdown options.
     - Regulated: should be on
     - Tags: first item from possible options. You need to click on this element first to see dropdown options.
      And then click to form container to apply selected item
  - Action button "Create" should became enabled (have no class "disabled")
  - Click "Create" button
  - Form should disappear
  - Verify created item on Companies list grid
    - Order grid by name by clicking on "Name" grid header. Near "Name" should appear sort indicator with asc icon
    - Get the first item on grid.
    - Verify Item data with entered form data based on form elements and grid header names. All data should be the same.

3. Test Edit Item
  - List grid should have first item (row)
  - Click on the first row. Collect Item data from grid row.
  - Actions icons in "Actions" cell should became visible.
  - Click on edit (pencil) icon.
  - Form component should appear on page with following:
    - Form title is "Edit {Name}" - Where {Name} is the selected item "Name"
    - "Name" input should have selected item "Name"
    - "Closing Frequency" value should be equal Closing Frequency of selected item
    - "Regulated" value should be equal Regulated value of selected item
    - "Tags" value should be equal Tags value of selected item
    - Actions buttons
       - "Cancel" - should be enabled
       - "Save" - should be disabled
  - Change "Name" value by adding "!" on beginning. Keep new name to validate it.
  - "Save" action button should became enabled (have no class "disabled")
  - Click on "Save" button
  - Form should disappear
  - Verify edited item on Companies list grid
    - Order grid by name by clicking on "Name" grid header. Near "Name" should appear sort indicator with asc icon
    - Select first row item
    - Name of selected item should be the same as edited one

5. Test Copy Item
  - List grid should have first item (row)
  - Click on the first row. Collect Item data from grid row.
  - Actions icons in "Actions" cell should became visible.
  - Click on copy icon.
  - Form component should appear on page with following:
    - Form title is "Copying from {Name}" - Where {Name} is the selected item "Name"
    - "Name" input should have selected item "Name"
    - "Closing Frequency" value should be equal Closing Frequency of selected item
    - "Regulated" value should be equal Regulated value of selected item
    - "Tags" value should be equal Tags value of selected item
    - Actions buttons
       - "Cancel" - should be enabled
       - "Create" - should be disabled
  - Change "Name" value by adding "!" on beginning. Keep new name to validate it.
  - "Create" action button should became enabled (have no class "disabled")
  - Click on "Create" button
  - Form should disappear
  - Verify edited item on Companies list grid
    - Order grid by name by clicking on "Name" grid header. Near "Name" should appear sort indicator with asc icon
    - Select first row item
    - Name of selected item should be the same as edited one

6. Test delete item





Steps:
 - Go to the Listing page  (`authenticated_asset_class_page.open_with_id(base_settings.depr_case_id)`)
 - Check that page is loaded and grip exists
 - Select first row from the grid
 - Do the hover action on "Actions" cell for selected row
 - On hover actions icons should appear and have a pencil for edit
 - Click on edit icon
 - We should see ".configurations-form-wrapper" toster with edit form inside (`form_container`)
 - <p class="title"> should have text "Edit " + text from cell of selected row and Name column
 - `name_input` should and have correct name in value
 - Change the name to "112" + prev name
 -  `action_button_save` should became active
 - Click to save button.
 - edit form should hide (`self.form_container.should_be_visible(should_visible=False)`)
 - Asset classes listing grid should have row with new name





------  DELETE
/browser_generate_playwright_test
Can you add step to test deletion of asset class
Steps:
 - Go to assets class list page (`setup_authenticated_page`)
 - Check that page is loaded (`setup_authenticated_page`)
 - Select first row from the asset classes list grid
 - Click on this row
 - Get the Name of this record
 - Click on delete icon (.trash) in Actions column
 - Delete action should open confirmation popup (.confirmation) with header (.header) "Delete Asset Class " + Name of record
 - This popup should have active "Delete" button.
 - Click on "Delete" button.
 - Check success result:
    - Confirmation popup should disappear
    - Should be shown toster message with text "Successfully Deleted"
    - Deleted record should disappear from the listing grid



can you create a new tests for the Depreciation profile page, url is http://localhost:3000/depreciation/9aa52b3f-f76d-438d-9557-92984bd9e1fc/configurations/depreciation-profile

1. Page load. Test should open the page and verify the following
  - Page loaded successfully
  - Page should have title "Depreciation Profiles"
  - Page should finish grid data loading
  - Page should have grid with following headers expected_headers = [
            "Name",
            "Profile Description",
            "Class Life",
            "Bonus Eligible",
            "Mid-Quarter Eligible",
            "Amortization",
            "Rate Type",
            "Method",
            "Convention",
            "Life",
            "Tags",
            "Actions"
        ]


